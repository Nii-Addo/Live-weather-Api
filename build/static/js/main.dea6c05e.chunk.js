(this["webpackJsonplive-weather"]=this["webpackJsonplive-weather"]||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(85),o=n.n(i),l=(n(98),n(5)),c=n(8),s=n(9);function u(){var e=Object(c.a)(["\n  height: 30px;\n  background-color: gray;\n"]);return u=function(){return e},e}function d(){var e=Object(c.a)([""]);return d=function(){return e},e}function m(){var e=Object(c.a)(["\n  height: 30px;\n  background: transparent;\n  border-radius: 0px;\n  border: none;\n\n  &hover {\n    border-bottom: 2px solid underline;\n  }\n"]);return m=function(){return e},e}function p(){var e=Object(c.a)(["\n  height: 30px;\n  width: 100px;\n  font-size: 1em;\n  border: 1px solid;\n  border-radius: 6px;\n  display: block;\n  transition: all 0.2s ease-out 0s;\n  color: white;\n  background-color: #eb612a;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]);return p=function(){return e},e}function h(){var e=Object(c.a)(["\n  width: 150px;\n  height: 20px;\n  background-color: transparent;\n  color: white;\n  border: 0.05px solid pink;\n  font-size: 0.8em;\n  padding: 4px;\n  text-align: center;\n  margin-right: 4px;\n"]);return h=function(){return e},e}function g(){var e=Object(c.a)(["\n  background-color: var(--mainSilver);\n  margin-left: 100px;\n  margin-bottom: 20px;\n  margin-top: 20px;\n  width: 450px;\n  height: 150px;\n\n  .history-details {\n    width: 100%;\n    height: 100%;\n    display: flex;\n  }\n\n  .history-details .img {\n    width: 100%;\n    height: 100%;\n    margin-right: 12px;\n  }\n\n  .history-weather-icon {\n    display: block;\n  }\n\n  .history-details-stats {\n    margin-left: 6px;\n    text-transform: capitalize;\n    display: inline-block;\n  }\n\n  .history-details-stats div {\n    margin-right: 16px;\n    font-weight: bold;\n  }\n\n  .alt {\n    display: flex;\n    margin-top: 0px;\n  }\n"]);return g=function(){return e},e}function b(){var e=Object(c.a)(["\n  width: 100%;\n  height: 95%;\n\n  .basics {\n    position: absolute;\n    display: inline-flex;\n    width: 100%;\n    height: 40px;\n  }\n\n  .further-details {\n    position: absolute;\n    margin-left: 140px;\n    width: 100%;\n    display: flex;\n    top: 30%;\n    margin-top: 20px;\n  }\n\n  .further-details .img {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    margin-right: 10px;\n  }\n\n  .current-weather-icon {\n    display: block;\n  }\n\n  .further-details-stats {\n    position: absolute;\n    left: 9%;\n    margin-left: 36px;\n    text-transform: capitalize;\n    display: inline-flex;\n  }\n\n  .further-details-stats div {\n    margin-right: 13px;\n    font-weight: bold;\n  }\n\n  .alt {\n    display: flex;\n    position: absolute;\n    top: 70%;\n    margin-top: 30px;\n    left: 0%;\n    width: 100%;\n  }\n"]);return b=function(){return e},e}function f(){var e=Object(c.a)(["\n  font-size: 1em;\n  border: 1px solid;\n  border-radius: 6px;\n  display: block;\n  height: 35px;\n  transition: all 0.2s ease-out 0s;\n  background-color: green;\n  color: white;\n  width: 100px;\n\n  &:hover {\n    border: 1px solid;\n  }\n"]);return f=function(){return e},e}function v(){var e=Object(c.a)(["\n  width: 300px;\n  height: 30px;\n  border: 1px solid palevioletred;\n  border-radius: 6px;\n  padding: 2px 16px;\n  font-size: 1em;\n  color: black;\n"]);return v=function(){return e},e}var E=s.a.input(v()),w=s.a.button(f()),x=s.a.div(b()),y=Object(s.a)(x)(g()),O=s.a.div(h()),j=s.a.button(p()),k=Object(s.a)(w)(m()),N=Object(s.a)(k)(d()),S=Object(s.a)(w)(u()),C=n(3),_=Object(a.createContext)(),A=_.Provider,I=function(e){var t=e.children,n=Object(C.g)(),i=localStorage.getItem("token"),o=localStorage.getItem("expiresAt"),c=localStorage.getItem("userInfo"),s=Object(a.useState)({token:i,expiresAt:o,userInfo:c?JSON.parse(c):{}}),u=Object(l.a)(s,2),d=u[0],m=u[1],p=function(e){var t=e.token,n=e.userInfo,a=e.expiresAt;localStorage.setItem("token",t),localStorage.setItem("expiresAt",a),localStorage.setItem("userInfo",JSON.stringify(n)),m({token:t,userInfo:n,expiresAt:a})};return r.a.createElement(A,{value:{authState:d,setAuthState:function(e){return p(e)},isAuthenticated:function(){return!(!d.token||!d.expiresAt)&&(new Date).getTime()/1e3<d.expiresAt},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("expiresAt"),localStorage.removeItem("userInfo"),m({token:null,expiresAt:null,userInfo:{}}),n.push("/")},isAdmin:function(){return"admin"===d.userInfo._doc.role}}},t)},P=n(11),q=(n(55),function(e){var t=Object(a.useContext)(_),n=t.logout;return r.a.createElement("div",null,r.a.createElement("div",{className:"top-div"},r.a.createElement("div",null,r.a.createElement("span",{className:"app-name"},"Live-Weather")),r.a.createElement("div",null,t.isAuthenticated()?r.a.createElement("div",{className:"button-group"},r.a.createElement("div",null,r.a.createElement(S,{onClick:n},"Logout")),r.a.createElement("div",null,r.a.createElement(P.b,{to:"/history"},r.a.createElement(N,null,"History")))):r.a.createElement("div",{className:"button-group"},r.a.createElement(j,null,r.a.createElement(P.b,{to:"/login",style:{textDecoration:"none",color:"white"}},"Login")),r.a.createElement(P.b,{to:"/regsitration"},r.a.createElement(k,null,"Sign up"))))))}),z=function(e){var t=e.currentLocationWeather,n=t.wind_speed,a=t.humidity,i=t.precipitation,o=t.uv_index,l=t.visibility,c=t.pressure,s=t.weather_icons,u=t.temperature,d=t.feelslike,m=t.wind_degree,p=t.cloudcover;return r.a.createElement(r.a.Fragment,null,0===e.currentLocationWeather.length?"null":r.a.createElement(x,null,r.a.createElement("div",null,r.a.createElement("div",{className:"basics"},r.a.createElement(O,null,"Wind: ",n,"km/h"),r.a.createElement(O,null,"Humidity: ",a,"%"),r.a.createElement(O,null,"Precipitation: ",i,"mm"),r.a.createElement(O,null,"UV Index: ",o),r.a.createElement(O,null,"Visibility: ",l,"km/h"),r.a.createElement(O,null,"Pressure: ",c,"mb")),r.a.createElement("div",{className:"further-details"},r.a.createElement("div",{className:"current-weather-icon"},r.a.createElement("img",{src:s,alt:"weather-icon"})),r.a.createElement("div",{className:"further-details-stats"},r.a.createElement("div",null,"temperature: ",u,"\u2103"),r.a.createElement("div",null,"Wind Degree: ",m,"\xb0"),r.a.createElement("div",{className:"alt"},r.a.createElement("div",null,"Feels Like: ",d,"\u2103"),r.a.createElement("div",null,"Cloud Cover: ",p," okta")))))))},L=n(25),H=n.n(L),W=function(e){var t=e.handleChange,n=e.searchTerm,a=e.placeholder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"left"},r.a.createElement(E,{placeholder:a,name:"term",type:"text",className:"box",onChange:t})),r.a.createElement("div",{className:"left"},r.a.createElement(w,{type:"submit",onClick:n},"Search")))},F=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],o=n[1],c=Object(a.useState)({}),s=Object(l.a)(c,2),u=s[0],d=s[1];Object(a.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t={access_key:"d5fe5cb046133d4295ebe0af641dc641",query:[e.coords.latitude,e.coords.longitude].toString()};H.a.get("http://api.weatherstack.com/current",{params:t}).then((function(e){o(!0);var t={city:e.data.location.name,country:e.data.location.country,weather_icons:e.data.current.weather_icons,temperature:e.data.current.temperature,description:e.data.current.description,wind_speed:e.data.current.wind_speed,wind_direction:e.data.current.wind_direction,wind_degree:e.data.current.wind_degree,pressure:e.data.current.pressure,precipitation:e.data.current.precip,humidity:e.data.current.humidity,cloudcover:e.data.current.cloudcover,feelslike:e.data.current.feelslike,uv_index:e.data.current.uv_index,visibility:e.data.current.visibility};d(t)})).catch((function(e){o(!0),console.log(e)}))})):console.log("Not supported")}),[]);var m=Object(a.useState)(""),p=Object(l.a)(m,2),h=p[0],g=p[1],b=Object(a.useContext)(_),f=localStorage.getItem("token"),v=function(e){var t=e.target.value;g(t)},E=function(){var e={access_key:"d5fe5cb046133d4295ebe0af641dc641",query:h},t=H.a.create({headers:{Authorization:"Bearer ".concat(f)}});H.a.get("http://api.weatherstack.com/current",{params:e}).then((function(e){var n={city:e.data.location.name,country:e.data.location.country,weather_icons:e.data.current.weather_icons,temperature:e.data.current.temperature,description:e.data.current.description,wind_speed:e.data.current.wind_speed,wind_direction:e.data.current.wind_direction,wind_degree:e.data.current.wind_degree,pressure:e.data.current.pressure,precipitation:e.data.current.precip,humidity:e.data.current.humidity,cloudcover:e.data.current.cloudcover,feelslike:e.data.current.feelslike,uv_index:e.data.current.uv_index,visibility:e.data.current.visibility};d(n),b.isAuthenticated()&&t.post("https://niido-live-weather.herokuapp.com/","history",n)})).catch((function(e){console.log(e)}))};return i?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(q,{searchTerm:E,handleChange:v})),r.a.createElement("div",null,r.a.createElement("div",{className:"search-mod"},r.a.createElement(W,{searchTerm:E,handleChange:v,placeholder:u.city}))),r.a.createElement("div",{className:"current-weather"},r.a.createElement(z,{currentLocationWeather:u}))):r.a.createElement("div",null,"Loading...")},T=Object(a.createContext)(),B=T.Provider,D=function(e){var t=e.children,n=Object(a.useState)([]),i=Object(l.a)(n,2),o=i[0],c=i[1];return r.a.createElement(B,{value:{searchHistory:o,setSearchHistory:c}},t)},U=function(e){return function(t){var n=Object(a.useContext)(_);return r.a.createElement("div",null,n.isAuthenticated()?r.a.createElement(e,t):null)}},V=(n(68),function(e){var t=e.history,n=t.country,a=t.city,i=t.weather_icons,o=t.temperature,l=t.feelslike,c=t.wind_degree,s=t.cloudcover;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null,r.a.createElement("div",{className:"mb-2"},a,",",n),r.a.createElement("br",null),r.a.createElement("div",{className:"history-details"},r.a.createElement("div",{className:"history-weather-icon"},r.a.createElement("img",{src:i,alt:"weather-icon"})),r.a.createElement("div",{className:"history-details-stats"},r.a.createElement("div",null,"temperature: ",o,"\u2103"),r.a.createElement("div",null,"Wind Degree: ",c,"\xb0"),r.a.createElement("div",null,"Feels Like: ",l,"\u2103"),r.a.createElement("div",null,"Cloud Cover: ",s," okta")))))}),J=function(e){var t=Object(a.useContext)(T);return r.a.createElement("div",null,r.a.createElement("h4",{className:"intro"},"Your previous searches"),t.searchHistory.map((function(e){return r.a.createElement(V,{history:e,key:e.id})})))},M=function(e){var t=Object(a.useContext)(T),n=localStorage.getItem("token"),i=H.a.create({headers:{Authorization:"Bearer ".concat(n)}});Object(a.useEffect)((function(){i.get("https://niido-live-weather.herokuapp.com/history").then((function(e){t.setSearchHistory(e.data)})).catch((function(e){console.log(e)}))}),[]);var o=U(J);return r.a.createElement("div",null,r.a.createElement("div",null,0===t.searchHistory.length?r.a.createElement("div",{className:"authenticated-content"},r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h4",null,"Hi,You did not search for any city's weather"),r.a.createElement("div",null,"Search you city of interest and get you history here when you need it")))):r.a.createElement("div",{className:"authenticated-content"},r.a.createElement(o,null))),r.a.createElement("div",null,r.a.createElement("h1",{className:"brand-display"},r.a.createElement(P.b,{to:"/"},"Live-Weather"))))},Y=n(50),$=n.n(Y),G=n(56),K=n(36),Q=n(21),R=function(e){return Q.b().shape({email:Q.d().lowercase().email("E-mail is not valid!").required("E-mail is required!"),password:Q.d().min(8,"Password has to be longer than 6 characters!").required("Password is required!"),rememberMe:Q.a()})};n(121);function X(){var e=Object(c.a)(["\n  padding: 0.25em 1em;\n  display: block;\n  background: none;\n  background-color: #00a400;\n  border: none;\n  box-shadow: none;\n  color: #fff;\n  font-size: 18px;\n  font-weight: 600;\n  height: 80%;\n  width: 100%;\n  overflow: hidden;\n  padding-left: 32px;\n  padding-right: 32px;\n  text-shadow: none;\n  transition: all 0.2s ease-out 0s;\n\n  &:hover {\n    border: 1px solid;\n  }\n"]);return X=function(){return e},e}function Z(){var e=Object(c.a)(['\n  appearance: none;\n  background-color: rgb(255, 255, 255);\n  box-shadow: none;\n  color: rgb(34, 34, 34);\n  display: block;\n  font-family: "TT Norms", "TT Norms-fallback", proxima-nova, "Helvetica Neue",\n    Verdana, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  font-weight: 400;\n  height: 0.5rem;\n  letter-spacing: 0.012rem;\n  margin-bottom: 0px;\n  word-spacing: 0.16rem;\n  width: 90%;\n  border-width: 1px;\n  border-style: solid;\n  border-color: rgb(138, 138, 138);\n  border-image: initial;\n  border-radius: 2px;\n  padding: 1rem;\n']);return Z=function(){return e},e}var ee=Object(s.a)((function(e){var t=Object.assign({},e),n=Object(K.c)(t),a=Object(l.a)(n,2),i=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:"text-input"},i,t)),o.touched&&o.error?r.a.createElement("div",{className:"error"},o.error):null)}))(Z()),te=s.a.button(X()),ne=function(e){var t=Object(a.useContext)(_),n=Object(a.useState)(),i=Object(l.a)(n,2),o=(i[0],i[1]),c=Object(a.useState)(),s=Object(l.a)(c,2),u=(s[0],s[1]),d=Object(a.useState)(!1),m=Object(l.a)(d,2),p=m[0],h=m[1],g=Object(a.useState)(!1),b=Object(l.a)(g,2),f=b[0],v=b[1];return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-mod "},r.a.createElement("div",{className:"login-page-heading"},r.a.createElement("div",null,"Log in to your account")),r.a.createElement("div",null,r.a.createElement(K.b,{initialValues:{email:"",password:""},validationSchema:R,onSubmit:function(){var e=Object(G.a)($.a.mark((function e(n,a){var r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),r={email:n.email,password:n.password},e.next=4,H.a.post("https://niido-live-weather.herokuapp.com/users/login",r).then((function(e){t.setAuthState(e.data),o(e.data.message),u(""),v(!0)})).catch((function(e){h(!1);var t=e.response.data;u(t.message),o("")}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){return r.a.createElement("div",{className:"login-form"},f&&r.a.createElement(C.a,{to:"/"}),r.a.createElement(K.a,null,r.a.createElement("div",{className:"form-element"},r.a.createElement(ee,{className:"form-control",name:"email",type:"email",placeholder:"Email"})),r.a.createElement("div",{className:"form-element"},r.a.createElement(ee,{className:"form-control",name:"password",type:"password",placeholder:"Password"})),r.a.createElement("div",{className:"login-btn-space"},r.a.createElement(te,{type:"submit",value:"Submit"},p?"Loading...":"Submit"))))}))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(P.b,{to:"/regsitration",className:"signup-footer-link"},"Sign Up"))))},ae=n(92),re=function(e){return Q.b().shape({fullName:Q.d().min(3,"First name is too short").required("First name is required"),email:Q.d().lowercase().email("E-mail is not valid!").required("E-mail is required!"),password:Q.d().matches(/(?=.*[a-z])/,"one lower case required").min(8,"Password has to be longer than 6 characters!").required("Password is required!"),passwordConfirmation:Q.d().oneOf([Q.c("password")],"Passwords are not the same!").required("Confirm Password !")})};n(122);function ie(){var e=Object(c.a)(["\n  padding: 0.25em 1em;\n  display: block;\n  background: none;\n  background-color: #00a400;\n  border: none;\n  border-radius: 6px;\n  box-shadow: none;\n  color: #fff;\n  font-size: 18px;\n  font-weight: 600;\n  height: 40px;\n  width: 85%;\n  overflow: hidden;\n  padding-left: 32px;\n  padding-right: 32px;\n  text-shadow: none;\n  transition: all 0.2s ease-out 0s;\n"]);return ie=function(){return e},e}function oe(){var e=Object(c.a)(["\n  appearance: none;\n  background-color: rgb(255, 255, 255);\n  box-shadow: none;\n  color: rgb(34, 34, 34);\n  display: block;\n  font-size: 1rem;\n  font-weight: 500;\n  height: 0.5rem;\n  letter-spacing: 0.012rem;\n  margin-bottom: 0px;\n  word-spacing: 0.16rem;\n  width: 80%;\n  border-width: 1px;\n  border-style: solid;\n  border-color: rgb(138, 138, 138);\n  border-image: initial;\n  border-radius: 2px;\n  padding: 1rem;\n  margin-bottom: 10px;\n\n  .error {\n  }\n"]);return oe=function(){return e},e}function le(){var e=Object(c.a)(["\n  color: #1a73e8;\n  cursor: pointer;\n  display: inline-block;\n  font-weight: 500;\n  letter-spacing: 0.25px;\n  line-height: 36px;\n  padding: 2px 10px;\n  position: relative;\n  width: 140px;\n  height: 36px;\n\n  &:hover {\n    background-color: rgba(66, 133, 244, 0.26);\n  }\n"]);return le=function(){return e},e}var ce=s.a.div(le()),se=Object(s.a)((function(e){e.label;var t=Object(ae.a)(e,["label"]),n=Object(K.c)(t),a=Object(l.a)(n,2),i=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("input",Object.assign({className:"text-input"},i,t)),o.touched&&o.error?r.a.createElement("div",{className:"error",style:{color:"red",fontSize:"13px"}},o.error):null)}))(oe()),ue=s.a.button(ie()),de=Object(C.h)((function(){var e=Object(a.useContext)(_),t=Object(a.useState)(),n=Object(l.a)(t,2),i=(n[0],n[1]),o=Object(a.useState)(),c=Object(l.a)(o,2),s=(c[0],c[1]),u=Object(a.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1],h=Object(a.useState)(!1),g=Object(l.a)(h,2),b=g[0],f=g[1];return r.a.createElement("div",{className:"signup-page"},r.a.createElement("div",{className:"signup-page-mod"},r.a.createElement("div",{className:"signup-page-heading"},r.a.createElement("p",{className:"text-heading"},"Sign Up"),r.a.createElement("div",null,"Create your Live-weather Account")),r.a.createElement("div",{className:"signup-page-form"},r.a.createElement(K.b,{initialValues:{fullName:"",email:"",password:"",passwordConfirmation:""},validationSchema:re,onSubmit:function(){var t=Object(G.a)($.a.mark((function t(n,a){var r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),r={fullName:n.fullName,email:n.email,password:n.password,passwordConfirmation:n.passwordConfirmation},t.next=4,H.a.post("https://niido-live-weather.herokuapp.com/users/register",r).then((function(t){e.setAuthState(t.data),i(t.data.message),s(""),f(!0)})).catch((function(e){p(!1);var t=e.response.data;s(t.message),i("")}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},r.a.createElement("div",null,b&&r.a.createElement(C.a,{to:"/login"}),r.a.createElement(K.a,null,r.a.createElement("div",null,r.a.createElement(se,{name:"fullName",type:"text",placeholder:"Full name"})),r.a.createElement("div",{className:"col-12"},r.a.createElement(se,{name:"email",type:"email",placeholder:"Email"})),r.a.createElement("div",null,r.a.createElement(se,{name:"password",type:"password",placeholder:"Password"})),r.a.createElement("div",null,r.a.createElement(se,{name:"passwordConfirmation",type:"password",placeholder:"Confirm password"})),r.a.createElement("br",null),r.a.createElement("div",{className:"signup-form-bottom"},r.a.createElement("span",{className:"agreement"},"By clicking Sign Up, you agree to our Terms, Data Policy and Cookies Policy."),r.a.createElement("div",{className:"mt-2"},r.a.createElement(ue,{type:"submit",value:"Submit",className:"btnSignup"},m?"Loading..":"Sign Up"))))))),r.a.createElement("br",null),r.a.createElement("div",{className:"signin-link-on-signup-form"},"Already registered?"," ",r.a.createElement(ce,null,r.a.createElement(P.b,{to:"/login"},"Sign in instead")))))})),me=(n(123),function(e){return r.a.createElement(C.d,null,r.a.createElement(C.b,{exact:!0,path:"/"},r.a.createElement(F,null)),r.a.createElement(C.b,{path:"/history"},r.a.createElement(M,null)),r.a.createElement(C.b,{path:"/login"},r.a.createElement(ne,null)),r.a.createElement(C.b,{path:"/regsitration"},r.a.createElement(de,null)))});var pe=function(){return r.a.createElement(P.a,null,r.a.createElement(I,null,r.a.createElement(D,null,r.a.createElement("div",{className:"App"},r.a.createElement(me,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},55:function(e,t,n){},68:function(e,t,n){},93:function(e,t,n){e.exports=n(124)},98:function(e,t,n){}},[[93,1,2]]]);
//# sourceMappingURL=main.dea6c05e.chunk.js.map